# csharp_sample
C#のサンプルコード用

# コンソールプロジェクトの作成

`dotnet new console` でコンソールのテンプレートを使用したプロジェクトを新規作成できる。

# 実行

`dotnet run` で実行

# コンソールプロジェクトのVS Code デバッグ設定

`launch.json` の `console` プロパティを `integratedTerminal` にすることで、ターミナルを利用した入出力が可能となる。

# C#各種機能


## 名前空間

名前空間は、クラスなどを所属させることができる領域。
単純に同じクラス名を付けると名前が衝突してエラーとなるが、
異なる名前空間に所属させることにより、衝突を避けることができる。

`namespace [名前空間名]` で名前空間を定義できる。
名前空間は階層化が可能。

`using [名前空間名];` で名前空間を参照できる。 

.NET標準のライブラリも名前空間に属している(例: `System.Collections.Generic`)

### エイリアス

`using [エイリアス名] = [名前空間名];` で名前空間を別名で参照できる。

### using static

`using static [名前空間名].[クラス名];` で、名前空間内にある対象クラスのstaticメソッドを参照できる。
こうすると、名前空間やクラス名の指定なく、関数名だけで呼び出せる。

## 型

C#には以下の型がある。

- 値型
  - 整数型
    - 符号あり整数
      - `sbyte` : 8bit
      - `short` : 16bit
      - `int` : 32bit
      - `long` 64bit
    - 符号なし整数
      - `byte` : 8bit
      - `ushort` : 16bit
      - `uint` : 32bit
      - `ulong` : 64bit
  - 浮動小数点型
    - 2進
      - `float` : 32bit
      - `double` : 64bit
    - 10進
      - `decimal` : 128bit
  - 真理値型
    - `bool` : true/falseの二値
  - 文字/文字列
    - `char` : 1文字を表現
    - `string` : 0～任意長の文字列
  - オブジェクト型
    - `object` : 任意の型を格納できる

整数は`int`、実数は`double` を使うのが基本。
単に扱う値が狭い、負の数を使わない、などの理由で範囲の狭い型や符号無し型は使わなくてよい。
これらの型は、バイト数を厳密に扱いたい場合などに使う。

10進数演算の誤差を抑え、厳密に処理したいときに `decimal` 型を使う。高精度な代わりにパフォーマンスは落ちる。

安易に`object` 型を使ってはならない。本当に任意の型を入れなければいけない状況でのみ使う。
まずはインタフェースやジェネリックなどを使ってうまくできるように考えるべき。

## リテラル

C#で使えるリテラルは以下の通り。

- int: 10進数は数値そのまま。 16進数は0xを接頭辞に付ける。例: `0`, `100` , `0xFF01`
- long: 数字の末尾に`L` サフィックスを付ける。 例：`0L`, `100L`
- uint: 数字の末尾に`U` サフィックスを付ける。例: `0U`, `100U`
- ulong: 数字の末尾に`UL` サフィックスを付ける。例: `0UL` , `100UL`
- double: 数字の末尾に`D` サフィックスを付ける。または小数点付きの数値。または実数表記。 例: `0D`, `100D`,  `1.5`, `2E-5`
- float : 数字の末尾に`F` サフィックスを付ける。 例: `0F`, `100F` 
- decimal: 数字の末尾に`M` サフィックスを付ける。
- bool: `true` または　`false`
- char: シングルクォートで1つの文字を挟む。例: `'0'` , `'a'`
- string: ダブルクォートで文字列を挟む。例: `""`, `"abcde"`

- 数値リテラルにはセパレータを入れられる。 例: `123_456_789`
- 数値リテラルにおける英字は大文字小文字どちらでもよい。

- 文字リテラル/文字列リテラルにはエスケープシーケンスが使える。これにより特殊文字が表現可能。
  - エスケープシーケンスはバックスラッシュ `\` で始める。例: `\n` `\r` `\'`


## 変数宣言

- `[型] [変数名];` の形式で変数宣言が可能。例:  `int x;`
- 宣言と同時に代入することで、初期化が可能。例: `int x = 100;`

### 型推論
- 型の代わりに `var` を使って宣言+初期化すると、型推論が可能。 例: `var x = 1.5;` (double型)
- 右辺に合わせた型が自動的に設定される。
- 推論のため、初期化がないとエラーとなる。

### dynamic型
- `dynamic` を使って宣言すると、dynamic型が使える。
- 任意の型のデータを格納できる。
- `object` と異なり、メソッドやプロパティの呼び出しが「実行時に」評価される。



## 文字列

- `string` 。実体は `System.String` 型。
- C#では文字列は参照型。ただし、値型のような振る舞いをする側面も多い。
  - 編集ができず、演算結果が新しいオブジェクトとなる点もそう
- 長さの取得プロパティや、比較・検索などのメソッドが用意されている。
- 列挙可能で、列挙したときは個々の要素が文字(char型)となる。




